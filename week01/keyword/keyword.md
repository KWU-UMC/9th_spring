# WEEK 1 - 제이/한종서

## 핵심 키워드

### JOIN

- 데이터베이스에서 JOIN 연산은 여러 테이블에 흩어져 있는 데이터를 동시에 보여주려고 할 때 사용하는 연산이다.
- 공통된 컬럼을 기준으로 행(row)을 합쳐서 필요한 정보를 한 번에 조회한다.

### JOIN 종류

1. INNER JOIN

참조하는 테이블 모두에서 **조건에 맞는 행**만 결과에 포함한다. 교집합이라고 생각하면 편하다.

2. LEFT OUTER JOIN

**왼쪽 테이블의 모든 행과 오른쪽 테이블에서 조건에 맞는 행**만 결과에 포함한다. 왼쪽 + 교집합이라고 생각하면 편하다.
만약 오른쪽 테이블에서 매칭된 것이 없으면 `NULL`로 채운다.

3. RIGHT OUTER JOIN

LEFT OUTER JOIN에서 기준을 오른쪽 테이블로 하는 것을 제외하면 LEFT OUTER JOIN과 동일하다.

4. FULL OUTER JOIN

양쪽 테이블의 모든 행을 결과에 포함한다. 합집합이라고 생각하면 편하다.
MySQL에서는 해당 연산을 지원하지 않는다고 한다.

5. CROSS JOIN

데카르트 곱이라고도 하며, 두 테이블의 모든 행을 조합한다. 예를 들어, 왼쪽 테이블에 5개 행, 오른쪽 테이블에 5개 행이 있다면 25개의 행이 결과로 나온다.

### 트랜잭션(Transaction)

- 데이터베이스에서 여러 작업을 하나의 논리적 단위로 묶어서, 전부 성공하거나 전부 실패하도록 보장하는 기능이다.
- 중간에 문제가 생기면 변경된 내용을 전부 되돌려서 DB 상태를 일관되도록 유지한다.

#### 특징

`ACID`

Atomicity(원자성) - 트랜잭션에 포함된 작업은 모두 수행되거나, 전혀 수행되지 않아야 한다. 중간에 일부만 실행되는 일은 없다.<br>

Consistency(일관성) - 트랜잭션 전후로는 DB의 제약조건(무결성)이 항상 유지되어야 한다.<br>

Isolation(고립성) - 동시에 여러 트랜잭션이 실행돼도 서로 간섭하지 않는다. 각 트랜잭션은 서로 영향을 주지 않고 독립적으로 처리되어야 한다.<br>

Durability(지속성) - 커밋이 완료된 데이터는 시스템 장애가 발생해도 보존되어야 한다. 즉, 트랜잭션이 성공적으로 완료되면 그 결과가 영구적으로 데이터베이스에 반영되어야 한다.

#### 예시

`계좌이체`

A가 B에게 10,000원을 송금한다.

1. 출금

```sql
UPDATE account SET balance = balance - 10000 WHERE user = 'A';
```

2. 입금

```sql
UPDATE account SET balance = balance + 10000 WHERE user = 'B';
```

-> 이 두 작업을 하나의 트랜잭션으로 묶는다.

A의 계좌에서 10,000원이 빠지고, B의 계좌에서 10,000원이 입금되어야 이를 최종 반영(COMMIT)한다.<br>

만약 출금은 성공했는데, 입금 중 오류가 발생했다면?
원자성에 의해 출금을 되돌리고, DB 상태를 이전 상태처럼 유지(ROLLBACK)해야 한다.

#### 정리

트랜잭션은 데이터의 신뢰성을 지키는 안전장치로써, 계좌이체처럼 여러 단계가 하나의 결과를 만드는 작업에서 트랜잭션이 없다면 중간 오류가 발생할 수 있다.

### JOIN ON과 WHERE의 차이

- ON: 두 테이블을 어떻게 연결할지 지정한다. (JOIN 단계)
- WHERE: JOIN으로 만들어진 결과 집합에서 **필터링** (JOIN 이후 단계)

즉, `ON`은 행을 붙일 기준이고 `WHERE`는 붙인 뒤 어떤 행을 보여줄지 결정한다.