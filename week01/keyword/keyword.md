# DB Join이란?

  ### Join의 정의

  두 개 이상의 테이블에서 데이터를 결합하여 하나의 결과 집합으로 만드는 연산. 테이블 간의 관계를 바탕으로 공통된 칼럼을 사용하여 데이터를 연결.

  데이터베이스의 **정규화** 원칙 때문에 필수적인 기능.
  cf. 정규화 : 데이터 중복을 최소화하기 위해 테이블을 여러 개로 나누는 과정.
    
  ---

  ### Join의 장점

    - **데이터 중복 감소**: 정규화를 통해 데이터 중복을 제거하고, 저장 공간을 효율적으로 사용할 수 있음.
    - **유연한 쿼리**: 여러 테이블에 분산된 데이터를 필요에 따라 자유롭게 결합하여 다양한 형태의 정보를 조회할 수 있음.
    - **데이터 무결성 유지**: 데이터가 한 곳에만 존재하므로 데이터가 변경될 때 발생하는 불일치(inconsistency)를 방지할 수 있음.

    ---

  ### Join의 단점

    - **성능 저하**: 여러 테이블을 결합하는 과정은 단일 테이블을 조회하는 것보다 더 많은 연산이 필요하므로 **성능이 저하**될 수 있음. 특히, 조인하는 테이블의 크기가 클수록, 조인 조건이 복잡할수록 성능 저하는 더 심해짐.
    - **복잡한 쿼리**: 많은 테이블을 조인할수록 쿼리문이 복잡해지고 가독성이 떨어질 수 있음.

    ---

  ### Join의 필요성

  데이터베이스는 일반적으로 **정규화**를 통해 데이터를 중복 없이 여러 테이블에 나누어 저장.

  예를 들어, '사용자 정보' 테이블과 '주문 내역' 테이블이 분리되어 있을 수 있음. 이때, 특정 사용자의 주문 정보를 확인하려면 두 테이블을 연결해야 함.

  Join은 이렇게 분리된 테이블의 데이터를 결합하여 필요한 정보를 통합적으로 조회하는 데 필수적인 기능.

- Join 종류들
    ## **INNER JOIN (내부 조인)** 
    - 양쪽 테이블에 모두 일치하는 데이터가 있는 행만 반환. 가장 일반적으로 사용되는 방식.
    ```jsx
          SELECT *
          FROM TableA
          INNER JOIN TableB
          ON TableA.common_column = TableB.common_column;
    ```
 
    ## **LEFT JOIN (왼쪽 외부 조인)**
    - 왼쪽 테이블의 모든 행과 오른쪽 테이블에서 일치하는 행을 반환. 만약 오른쪽 테이블에 일치하는 행이 없으면, 해당 칼럼은 NULL 값으로 채워짐.
    ```jsx
          SELECT *
          FROM TableA
          LEFT JOIN TableB
          ON TableA.common_column = TableB.common_column;
    ```

    ## **RIGHT JOIN (오른쪽 외부 조인)**
    - 오른쪽 테이블의 모든 행과 왼쪽 테이블에서 일치하는 행을 반환. LEFT JOIN과 반대.
    ```jsx
            SELECT *
            FROM TableA
            RIGHT JOIN TableB
            ON TableA.common_column = TableB.common_column;
    ```

    ## **FULL OUTER JOIN (전체 외부 조인)**
    - 양쪽 테이블의 모든 행을 반환. 일치하는 데이터가 없으면 NULL 값으로 채워집니다. 모든 데이터의 합집합을 얻고 싶을 때 사용.
    ```jsx
              SELECT *
              FROM TableA
              FULL OUTER JOIN TableB
              ON TableA.common_column = TableB.common_column;
    ```

    일부 데이터베이스 시스템(예: MySQL)은 `FULL OUTER JOIN`을 직접 지원하지 않아, `LEFT JOIN`과 `RIGHT JOIN`을 `UNION`으로 결합하여 비슷한 결과값 출력.

# 트랜잭션이란?

  데이터베이스에서 트랜잭션(Transaction)은 여러 개의 데이터베이스 연산들을 하나의 논리적인 작업 단위로 묶는 것을 의미. 이 작업 단위는 모두 성공하거나, 모두 실패하여 원래 상태로 되돌아가야 함.
  즉, **"ALL or NOTHING"** 원칙을 따름.

  ### 트랜잭션의 필요성

  트랜잭션은 여러 개의 데이터베이스 작업을 **하나의 묶음**으로 처리하기 위해 필요함. 이 묶음은 **"모두 성공하거나, 아니면 모두 실패하고 처음으로 되돌아간다"**는 규칙을 철저히 지켜야 함.

  (예시)

    1. A 계좌에서 10만 원 인출.
    2. B 계좌에 10만 원 입금.

  만약 1번 단계는 성공하고 2번 단계가 실패하면, A 계좌에서는 돈이 빠져나갔지만 B 계좌로는 돈이 들어가지 않아 시스템에 심각한 오류가 발생.

  트랜잭션은 이러한 문제가 발생하지 않도록 이 두 단계를 하나의 트랜잭션으로 묶음. 만약 한 단계라도 실패하면, 전체 작업이 취소되고(Rollback) 원래 상태로 되돌아감.

  결론적으로, 트랜잭션은 여러 작업이 **쪼개지면 안 되는 경우**에 사용하며 데이터의 **정확성과 신뢰성**을 보장하기 위해 꼭 필요함.

  ### 트랜잭션의 특징 (ACID)

  트랜잭션은 **ACID**라는 네 가지 중요한 속성을 보장해야 함. 이 속성들은 데이터베이스 시스템의 신뢰성을 높여줌.
    
- **원자성 (Atomicity)**: 트랜잭션 내의 모든 연산은 완전히 실행되거나, 전혀 실행되지 않아야 함.
      "ALL or NOTHING" 원칙을 의미합니다.
- **일관성 (Consistency)**: 트랜잭션이 성공적으로 완료되면, 데이터베이스는 항상 일관된 상태를 유지해야 함. 데이터의 제약 조건(예: 외래 키, 고유성)을 위반하지 않아야 함.
- **고립성 (Isolation)**: 여러 트랜잭션이 동시에 실행될 때, 각 트랜잭션은 다른 트랜잭션에 영향을 주지 않고 독립적으로 실행되는 것처럼 보여야 함.
- **지속성 (Durability)**: 트랜잭션이 성공적으로 완료되면, 그 결과는 영구적으로 데이터베이스에 반영되어야 하며, 시스템 오류가 발생하더라도 손실되지 않아야 함.

  
이 네 가지 속성을 통해 트랜잭션은 데이터의 정확성과 신뢰성을 보장하며, 데이터베이스 시스템을 안정적으로 운영할 수 있게 해줌.

# Join on 과 where의 차이

  JOIN...ON과 WHERE는 둘 다 데이터 필터링에 사용되지만, **작동하는 시점과 방식**에서 큰 차이가 있음.

  ### JOIN...ON
- *`JOIN...ON`*은 두 테이블을 **결합(Join)하는 조건**을 지정. 이는 테이블들이 물리적으로 결합되기 전에 어떤 기준으로 연결될지 결정하는 역할.
- **역할**: 두 테이블의 공통 칼럼을 연결해 새로운 결과 집합을 생성.
- **작동 시점**: `FROM` 절에서 테이블을 결합하는 과정에 바로 적용.
- **예시**: `students` 테이블과 `classes` 테이블을 `student_id`를 기준으로 결합.

    ```jsx
    SELECT *
    FROM students
    JOIN classes ON students.student_id = classes.student_id;
    ```

  이 쿼리는 `student_id`가 일치하는 행들만 결합하여 하나의 결과 테이블을 만듦.
    
    ### WHERE
    
    - *`WHERE`*는 **이미 결합된 결과 집합에서 특정 행을 필터링**하는 데 사용. 이는 `JOIN` 연산이 완료된 후, 최종적으로 사용자에게 보여줄 데이터를 고르는 역할.
    - **역할**: 결합된 결과 집합에서 특정 조건에 맞는 행만 추출.
    - **작동 시점**: `JOIN` 연산이 완료된 후, `SELECT` 절이 실행되기 전에 적용.
    - **예시**: 위에서 결합된 결과 중, `class_name`이 'Math'인 행만 필터링.
        
        ```jsx
        SELECT *
        FROM students
        JOIN classes ON students.student_id = classes.student_id
        WHERE classes.class_name = 'Math';
        ```

    ### 주요 차이점 요약
    
    | 구분 | `JOIN...ON` | `WHERE` |
    | --- | --- | --- |
    | **목적** | 테이블 결합 조건 | 행 필터링 조건 |
    | **작동 시점** | 테이블 결합 이전 | 테이블 결합 이후 |
    | **결과** | 테이블 결합 기준 | 최종 데이터 필터링 |
    
    결론적으로, `JOIN...ON`은 여러 테이블을 어떻게 합칠지 정의하는 반면, `WHERE`는 합쳐진 결과에서 어떤 데이터를 최종적으로 선택할지 결정하는 역할을 함**.** 따라서 두 절을 올바른 순서와 목적에 맞게 사용하는 것이 중요.